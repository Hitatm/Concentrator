<!DOCTYPE html>
<html lang="zh-CN">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>transmission</title>

    <link href="../../static/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/bootstrap-3.3.5/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/upload/buttons.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/upload/default.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/upload/fileinput.min.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/progress-bar/ui.css" rel="stylesheet" type="text/css"/>
    <link href="../../static/progress-bar/ui.progress-bar.css" rel="stylesheet" type="text/css"/>
    
    <link rel="stylesheet" type="text/css" media="all" href="../../static/daterangepicker/daterangepicker-bs3.css" />
    <link rel="stylesheet" type="text/css" media="all" href="../../static/daterangepicker/daterangepicker-1.3.7.css" />
    <link href="../../static/daterangepicker/font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet">

<script src="../../static/bootstrap-3.3.5/js/jquery-1.11.3.min.js" type="text/javascript"></script>
<script src="../../static/bootstrap-3.3.5/js/bootstrap.min.js" type="text/javascript"></script>

</head>


<body>

    <table>
        <tr>
            <td>
                    <br />
                <form name="instruction1" method="POST" action='{{url_for('instruction1')}}'>
                <legend>读表与重启指令下发:</legend>
                <select id="mySelect" name="mySelect">
                <option value="readregularly">周期性读表指令下发</option>
                <option value="read" >读表指令下发</option>
                <option value="restart">重启指令下发</option>
                </select>
                <br />
                <input type="submit" value="提交" />
                </form><br /><br />
            </td>
        </tr>
        <tr>

            <td>
                <form name="instruction2" method="GET" action='{{url_for('instruction2')}}'>
                <legend>获取网络监测数据:</legend>
                    <!-- Progress bar -->
                    <div id="progress_bar" class="ui-progress-bar ui-container">
                    <div class="ui-progress" id="bar" style="width: 0.00%;">
                    <span class="ui-label" > <b class="value">0%</b> </span>
                    </div>
                    <!-- /Progress bar -->
                </div>
                <input type="submit" value="提交" />
                </form> 
            
            </td>
        </tr>
        <tr>
            <td>
            <br /><br />
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <form class="form-inline" name="instruction3" method="POST" action='{{url_for('instruction3')}}'>
                    <fieldset id="box">
                        <legend>网络参数配置指令下发:(请输入0-255之间的整数)</legend>
                        PANID:
                        <input type="text" name="PANID" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        CCA:
                         <input type="text" name="CCA" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        发射功率:
                        <input type="text" name="emitpower" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        CCA检查周期:
                        <input type="text" name="CCAcheckingperiod" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        inactive:
                        <input type="text" name="inactive" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        channel:
                        <input type="text" name="channel" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        DIO_minlen:
                        <input type="text" name="DIO_minlen" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                        DIO_max:
                        <input type="text" name="DIO_max" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                        onblur="if(this.value>225){alert('不能大于225！');this.focus();}"
                        /><br />
                    </fieldset> 
                <input type="submit" value="提交" />
                </form>
            </div>
        </div>
    </div>
</td>
        </tr>
    </table>
    <br>

<script>
    function toPercent(data){
    // var strData = parseFloat(data)*100;
    var strData = parseFloat(data.toFixed(2)*100);
    var ret = strData.toString()+"%";
    return ret;
    }
    var timeTicket;
    clearInterval(timeTicket);
    timeTicket = setInterval(function (){
            $.ajax({
            type:"get",
            url:"{{url_for('update_net')}}",
            cache:false,
            contentType: "application/json;charset=UTF-8",
            dataType:"json",
            success:function(msg)
            {
                var rate = msg['now']/msg['total'];
                rate = toPercent(rate);
                var r = "width:" + rate + ";";
                var div1 = document.getElementById('bar');  
                div1.style=r;
                // $('.ui-label').text(rate);
                $('.value').text(rate);                              

            }

            })

    }, 2000);
    
    


        // var total = {{total}};
        // var now = 0;
        // window.onload = function(){

        //     timer = setInterval(function(event){
        //             progress();
        //             //flag=false;
                
                
        //     },1000);

        // }
        // function progress(){
        //     if(flag=true){
        //         flag=false;
        //         now = {{now}}
        //         var oDiv = document.getElementById("bar");
        //         oDiv.style.width =parseInt(oDiv.style.width) + 1 + "%";//parseInt将百分比转为整数，每隔50毫秒加1%
        //         oDiv.innerHTML = oDiv.style.width;
        //         console.log(parseInt(oDiv.style.width))
        //         if(oDiv.style.width == "100%"){
        //             clearInterval(timer);
        //         }
        //     }
            
        // }

    </script>


</body>

</html>
	



	